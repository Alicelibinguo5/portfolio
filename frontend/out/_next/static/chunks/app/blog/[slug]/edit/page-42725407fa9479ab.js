(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[238],{63:(e,t,s)=>{"use strict";var a=s(7260);s.o(a,"usePathname")&&s.d(t,{usePathname:function(){return a.usePathname}}),s.o(a,"useRouter")&&s.d(t,{useRouter:function(){return a.useRouter}})},2840:(e,t,s)=>{"use strict";s.d(t,{EditBlogPostClient:()=>u});var a=s(5155),r=s(2115),n=s(2619),l=s.n(n),o=s(63),i=s(5626),c=s(7621);function u(e){let{slug:t}=e,s=(0,o.useRouter)(),[n,u]=(0,r.useState)(null),[d,m]=(0,r.useState)(""),[h,x]=(0,r.useState)(""),[f,p]=(0,r.useState)(""),[g,b]=(0,r.useState)(!0),[j,v]=(0,r.useState)(!1),[y,N]=(0,r.useState)(null);async function k(e){if(e.preventDefault(),t){v(!0),N(null);try{let e=await fetch("".concat(c.H,"/api/blog/").concat(t),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:d,summary:h,content:f})});if(!e.ok){let t=await e.text();throw Error("Failed to save: ".concat(e.status," - ").concat(t))}s.push("/blog/".concat(t))}catch(e){N(e instanceof Error?e.message:"Error saving post")}finally{v(!1)}}}return((0,r.useEffect)(()=>{if(!t)return;let e=new AbortController;return async function(){try{let s=await fetch("".concat(c.H,"/api/blog/").concat(t),{signal:e.signal});if(!s.ok)return void(404===s.status?N("Post not found. The post may have been deleted."):N("Failed to load post: ".concat(s.status," ").concat(s.statusText)));let a=await s.json();u(a),m(a.title),x(a.summary),p(a.content)}catch(e){var s;e instanceof Error&&"AbortError"!==e.name&&N(null!=(s=e.message)?s:"Error loading post")}finally{b(!1)}}(),()=>e.abort()},[t]),g)?(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"h-8 w-32 bg-soft-clay rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-64 w-full bg-soft-clay rounded animate-pulse"})]}):y&&!n?(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsx)("p",{className:"text-terracotta",children:y}),(0,a.jsxs)(l(),{href:"/blog",className:"nav-link inline-flex items-center gap-2",children:[(0,a.jsx)(i.A,{strokeWidth:1.5,size:16})," Back to Blog"]})]}):n?(0,a.jsxs)("section",{className:"space-y-8 max-w-2xl",children:[(0,a.jsxs)(l(),{href:"/blog",className:"nav-link inline-flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(i.A,{strokeWidth:1.5,size:16}),"Back to Blog"]}),(0,a.jsx)("h1",{className:"font-display text-3xl md:text-4xl font-semibold text-forest",children:"Edit Post"}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-forest mb-2",children:"Title"}),(0,a.jsx)("input",{id:"title",className:"input-botanical",value:d,onChange:e=>m(e.target.value),required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-forest mb-2",children:"Summary"}),(0,a.jsx)("textarea",{id:"summary",className:"input-botanical min-h-[80px] resize-y",value:h,onChange:e=>x(e.target.value),rows:3,required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-forest mb-2",children:"Content"}),(0,a.jsx)("textarea",{id:"content",className:"input-botanical min-h-[200px] resize-y font-mono text-sm",value:f,onChange:e=>p(e.target.value),rows:10,required:!0})]}),y&&(0,a.jsx)("p",{className:"text-terracotta text-sm",children:y}),(0,a.jsxs)("div",{className:"flex gap-4",children:[(0,a.jsx)("button",{type:"submit",disabled:j,className:"btn-primary",children:j?"Savingâ€¦":"Save Changes"}),(0,a.jsx)(l(),{href:"/blog/".concat(t),className:"btn-secondary",children:"Cancel"})]})]})]}):(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsx)("p",{children:"Post not found."}),(0,a.jsxs)(l(),{href:"/blog",className:"nav-link inline-flex items-center gap-2",children:[(0,a.jsx)(i.A,{strokeWidth:1.5,size:16})," Back to Blog"]})]})}},3432:(e,t,s)=>{Promise.resolve().then(s.bind(s,2840))},5121:(e,t,s)=>{"use strict";s.d(t,{A:()=>i});var a=s(2115);let r=function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.filter((e,t,s)=>!!e&&""!==e.trim()&&s.indexOf(e)===t).join(" ").trim()},n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var l={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,a.forwardRef)((e,t)=>{let{color:s="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...m}=e;return(0,a.createElement)("svg",{ref:t,...l,width:n,height:n,stroke:s,strokeWidth:i?24*Number(o)/Number(n):o,className:r("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(m)&&{"aria-hidden":"true"},...m},[...d.map(e=>{let[t,s]=e;return(0,a.createElement)(t,s)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let s=(0,a.forwardRef)((s,l)=>{let{className:i,...c}=s;return(0,a.createElement)(o,{ref:l,iconNode:t,className:r("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return s.displayName=n(e),s}},5626:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(5121).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7621:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});let a=s(5704).env.NEXT_PUBLIC_API_URL||""}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=3432)),_N_E=e.O()}]);