(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[953],{5869:(e,t,s)=>{Promise.resolve().then(s.bind(s,9399))},7621:(e,t,s)=>{"use strict";s.d(t,{H:()=>a});let a=s(5704).env.NEXT_PUBLIC_API_URL||""},9399:(e,t,s)=>{"use strict";s.d(t,{BlogPostClient:()=>h});var a=s(5155),n=s(2115),l=s(2619),r=s.n(l),i=s(63),c=s(4558),o=s(228),d=s.n(o),x=s(5626),m=s(1010),u=s(1360),f=s(7621);function h(e){let{slug:t}=e,s=(0,i.useRouter)(),[l,o]=(0,n.useState)(null),[h,g]=(0,n.useState)(!0),[p,j]=(0,n.useState)(null),[b,N]=(0,n.useState)(!1),[y,v]=(0,n.useState)(""),k=(0,n.useMemo)(()=>{if(!(null==l?void 0:l.content))return null;let e=Math.max(1,Math.round(l.content.trim().split(/\s+/).length/200));return"".concat(e," min read")},[l]);return((0,n.useEffect)(()=>{!async function(){if(!(null==l?void 0:l.content))return v("");let e=await c.xI.parse(l.content),t=document.createElement("div");t.innerHTML="string"==typeof e?e:"",t.querySelectorAll("pre code").forEach(e=>{let t=Array.from(e.classList).find(e=>e.startsWith("language-"));if(t){let s=t.replace("language-","");if(d().languages[s])try{let t=e.textContent||"";e.innerHTML=d().highlight(t,d().languages[s],s)}catch(e){}}}),v(t.innerHTML)}()},[l]),(0,n.useEffect)(()=>{if(b||!t)return;let e=new AbortController;return async function(){try{let a=await fetch("".concat(f.H,"/api/blog/").concat(t),{signal:e.signal});if(!a.ok)return void s.replace("/blog");let n=await a.json();o(n)}catch(e){var a;e instanceof Error&&"AbortError"!==e.name&&j(null!=(a=e.message)?a:"Error")}finally{g(!1)}}(),()=>e.abort()},[t,b,s]),h)?(0,a.jsxs)("section",{className:"space-y-8",children:[(0,a.jsx)("div",{className:"h-8 w-48 bg-soft-clay rounded animate-pulse"}),(0,a.jsx)("div",{className:"h-64 w-full bg-soft-clay rounded animate-pulse"})]}):p?(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsx)("p",{className:"text-terracotta",children:p}),(0,a.jsx)(r(),{href:"/blog",className:"nav-link inline-flex items-center gap-2",children:"← Back to Blog"})]}):l?(0,a.jsxs)("article",{className:"space-y-8 md:space-y-12 max-w-3xl",children:[(0,a.jsxs)(r(),{href:"/blog",className:"nav-link inline-flex items-center gap-2 text-sm font-medium",children:[(0,a.jsx)(x.A,{strokeWidth:1.5,size:16}),"Back to Blog"]}),(0,a.jsxs)("header",{children:[(0,a.jsx)("h1",{className:"font-display text-3xl md:text-4xl lg:text-5xl font-semibold text-forest leading-tight",children:l.title}),(0,a.jsxs)("div",{className:"flex flex-wrap items-center gap-3 mt-4 text-sm text-forest/60",children:[(0,a.jsx)("time",{dateTime:l.created_at,children:new Date(l.created_at).toLocaleDateString()}),k&&(0,a.jsxs)("span",{children:["\xb7 ",k]})]}),l.tags&&l.tags.length>0&&(0,a.jsx)("div",{className:"flex flex-wrap gap-2 mt-4",children:l.tags.map(e=>(0,a.jsx)("span",{className:"px-2.5 py-1 rounded-full bg-soft-clay text-forest/70 text-xs",children:e},e))})]}),(0,a.jsx)("div",{className:"prose-botanical",dangerouslySetInnerHTML:{__html:y}}),(0,a.jsxs)("footer",{className:"flex items-center gap-6 pt-8 border-t border-stone/50",children:[(0,a.jsxs)(r(),{href:"/blog/".concat(l.slug,"/edit"),className:"inline-flex items-center gap-2 text-sage hover:text-terracotta font-medium transition-colors",children:[(0,a.jsx)(m.A,{strokeWidth:1.5,size:18}),"Edit"]}),(0,a.jsxs)("button",{type:"button",className:"inline-flex items-center gap-2 text-terracotta hover:underline font-medium",onClick:async()=>{confirm("Delete this post? This cannot be undone.")&&(N(!0),await fetch("".concat(f.H,"/api/blog/").concat(l.slug),{method:"DELETE"}),s.replace("/blog"))},children:[(0,a.jsx)(u.A,{strokeWidth:1.5,size:18}),"Delete"]})]})]}):(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsx)("p",{className:"text-forest/80",children:"Post not found."}),(0,a.jsx)(r(),{href:"/blog",className:"nav-link inline-flex items-center gap-2",children:"← Back to Blog"})]})}s(3694)}},e=>{e.O(0,[785,619,582,441,255,358],()=>e(e.s=5869)),_N_E=e.O()}]);