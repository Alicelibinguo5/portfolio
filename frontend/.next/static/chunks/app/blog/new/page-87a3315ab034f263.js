(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{63:(e,t,l)=>{"use strict";var s=l(7260);l.o(s,"usePathname")&&l.d(t,{usePathname:function(){return s.usePathname}}),l.o(s,"useRouter")&&l.d(t,{useRouter:function(){return s.useRouter}})},3114:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>g});var s=l(5155),r=l(2115),n=l(2619),a=l.n(n),o=l(63),i=l(5626),c=l(5121);let u=(0,c.A)("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]),d=(0,c.A)("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]),h=(0,c.A)("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]),m=(0,c.A)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);var x=l(7621);function g(){let e=(0,o.useRouter)(),[t,l]=(0,r.useState)(""),[n,c]=(0,r.useState)(""),[g,f]=(0,r.useState)(""),p=(0,r.useRef)(null),[y,b]=(0,r.useState)(!1),[v,k]=(0,r.useState)(null);function j(e){var t,l;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=p.current;if(!r)return void f(t=>"".concat(e).concat(t).concat(s));let n=null!=(t=r.selectionStart)?t:0,a=null!=(l=r.selectionEnd)?l:0,o=g.slice(n,a);f(g.slice(0,n)+e+o+s+g.slice(a)),setTimeout(()=>{r.focus(),r.selectionStart=n+e.length,r.selectionEnd=n+e.length+o.length},0)}async function N(l){l.preventDefault(),b(!0),k(null);try{let l=await fetch("".concat(x.H,"/api/blog/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:t,summary:n,content:g})});if(!l.ok)throw Error("Failed: ".concat(l.status));let s=await l.json();e.push("/blog/".concat(s.slug))}catch(e){k(e instanceof Error?e.message:"Error")}finally{b(!1)}}return(0,s.jsxs)("section",{className:"space-y-8 max-w-2xl",children:[(0,s.jsxs)(a(),{href:"/blog",className:"nav-link inline-flex items-center gap-2 text-sm font-medium",children:[(0,s.jsx)(i.A,{strokeWidth:1.5,size:16}),"Back to Blog"]}),(0,s.jsx)("h1",{className:"font-display text-3xl md:text-4xl font-semibold text-forest",children:"New Post"}),(0,s.jsxs)("form",{onSubmit:N,className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2 p-4 rounded-2xl bg-soft-clay/50",children:[(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg text-forest/70 hover:text-sage hover:bg-sage/10 transition-colors",onClick:()=>j("**"),title:"Bold",children:(0,s.jsx)(u,{strokeWidth:1.5,size:18})}),(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg text-forest/70 hover:text-sage hover:bg-sage/10 transition-colors",onClick:()=>j("_"),title:"Italic",children:(0,s.jsx)(d,{strokeWidth:1.5,size:18})}),(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg text-forest/70 hover:text-sage hover:bg-sage/10 transition-colors",onClick:()=>j("`"),title:"Code",children:(0,s.jsx)(h,{strokeWidth:1.5,size:18})}),(0,s.jsx)("button",{type:"button",className:"p-2 rounded-lg text-forest/70 hover:text-sage hover:bg-sage/10 transition-colors",onClick:()=>j("\n```\n","\n```\n"),title:"Code block",children:"Code block"}),(0,s.jsxs)("button",{type:"button",className:"p-2 rounded-lg text-forest/70 hover:text-sage hover:bg-sage/10 transition-colors inline-flex items-center gap-1",onClick:()=>{var e,t,l,s,r;let n=null==(e=prompt("Image URL"))?void 0:e.trim();if(!n)return;let a=null!=(l=null==(t=prompt("Alt text (optional)"))?void 0:t.trim())?l:"",o='<img src="'.concat(n,'" alt="').concat(a,'" loading="lazy" style="max-width:100%;height:auto;" />'),i=p.current;if(i){let e=null!=(s=i.selectionStart)?s:g.length,t=null!=(r=i.selectionEnd)?r:g.length;f(g.slice(0,e)+o+g.slice(t)),setTimeout(()=>{i.focus(),i.selectionStart=i.selectionEnd=e+o.length},0)}else f(e=>e+o)},title:"Insert image",children:[(0,s.jsx)(m,{strokeWidth:1.5,size:18})," Image"]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-forest mb-2",children:"Title"}),(0,s.jsx)("input",{id:"title",className:"input-botanical",value:t,onChange:e=>l(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"summary",className:"block text-sm font-medium text-forest mb-2",children:"Summary"}),(0,s.jsx)("textarea",{id:"summary",className:"input-botanical min-h-[80px] resize-y",value:n,onChange:e=>c(e.target.value),rows:3,required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-forest mb-2",children:"Content"}),(0,s.jsx)("textarea",{ref:p,id:"content",className:"input-botanical min-h-[200px] resize-y font-mono text-sm",value:g,onChange:e=>f(e.target.value),rows:10,required:!0,onPaste:async e=>{var t;let l=null==(t=e.clipboardData)?void 0:t.items;if(l){for(let t of l)if(t.type.startsWith("image/")){e.preventDefault();let l=t.getAsFile();if(!l)return;let s=new FileReader;s.onload=()=>{let e=String(s.result),t='<img src="'.concat(e,'" alt="pasted image" loading="lazy" style="max-width:100%;height:auto;" />'),l=p.current;if(l){var r,n;let e=null!=(r=l.selectionStart)?r:g.length,s=null!=(n=l.selectionEnd)?n:g.length;f(g.slice(0,e)+t+g.slice(s)),setTimeout(()=>{l.focus(),l.selectionStart=l.selectionEnd=e+t.length},0)}else f(e=>e+t)},s.readAsDataURL(l);break}}}})]}),v&&(0,s.jsx)("p",{className:"text-terracotta text-sm",children:v}),(0,s.jsx)("button",{type:"submit",disabled:y,className:"btn-primary",children:y?"Publishingâ€¦":"Publish"})]})]})}},4593:(e,t,l)=>{Promise.resolve().then(l.bind(l,3114))},5121:(e,t,l)=>{"use strict";l.d(t,{A:()=>i});var s=l(2115);let r=function(){for(var e=arguments.length,t=Array(e),l=0;l<e;l++)t[l]=arguments[l];return t.filter((e,t,l)=>!!e&&""!==e.trim()&&l.indexOf(e)===t).join(" ").trim()},n=e=>{let t=e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,l)=>l?l.toUpperCase():t.toLowerCase());return t.charAt(0).toUpperCase()+t.slice(1)};var a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let o=(0,s.forwardRef)((e,t)=>{let{color:l="currentColor",size:n=24,strokeWidth:o=2,absoluteStrokeWidth:i,className:c="",children:u,iconNode:d,...h}=e;return(0,s.createElement)("svg",{ref:t,...a,width:n,height:n,stroke:l,strokeWidth:i?24*Number(o)/Number(n):o,className:r("lucide",c),...!u&&!(e=>{for(let t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0;return!1})(h)&&{"aria-hidden":"true"},...h},[...d.map(e=>{let[t,l]=e;return(0,s.createElement)(t,l)}),...Array.isArray(u)?u:[u]])}),i=(e,t)=>{let l=(0,s.forwardRef)((l,a)=>{let{className:i,...c}=l;return(0,s.createElement)(o,{ref:a,iconNode:t,className:r("lucide-".concat(n(e).replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()),"lucide-".concat(e),i),...c})});return l.displayName=n(e),l}},5626:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let s=(0,l(5121).A)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7621:(e,t,l)=>{"use strict";l.d(t,{H:()=>s});let s="http://localhost:8000"}},e=>{e.O(0,[619,441,255,358],()=>e(e.s=4593)),_N_E=e.O()}]);